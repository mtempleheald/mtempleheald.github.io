<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		
		<link href="../../../../_app/immutable/assets/0.CeAKPTyx.css" rel="stylesheet">
		<link href="../../../../_app/immutable/assets/2.0064yJqm.css" rel="stylesheet">
		<link rel="modulepreload" href="../../../../_app/immutable/entry/start.C79-xvMf.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/entry.DaZGqSlT.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/runtime.BZuNgBny.js">
		<link rel="modulepreload" href="../../../../_app/immutable/entry/app.D8fn-cW0.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/render.CeUcSJ3F.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/svelte-head.BoBMsJEW.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/disclose-version.BZtIaq82.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/if.Cocn_Tq8.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/store.DX2XIyjU.js">
		<link rel="modulepreload" href="../../../../_app/immutable/nodes/0.DYHUpUh2.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/snippet.Cy8K4we5.js">
		<link rel="modulepreload" href="../../../../_app/immutable/nodes/2.D9cpv9Rn.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/legacy.CtV6FHWp.js">
		<link rel="modulepreload" href="../../../../_app/immutable/nodes/9.BkED6zbt.js">
		<link rel="modulepreload" href="../../../../_app/immutable/chunks/html.BY5OYTWt.js">
	</head>
	<body>
		<div><!--[--><!--[--><!----><!--[--><!----><div class="svelte-1yjh0wm"><header><h1 class="svelte-1yjh0wm">Mark Temple-Heald</h1> <h2 class="svelte-1yjh0wm">the right tool for the job</h2></header> <nav class="svelte-z3ooaf"><ul class="svelte-z3ooaf"><li class="svelte-z3ooaf"><a href="/" class="navAnchor">Home</a></li> <li class="svelte-z3ooaf"><a href="/blog" class="navAnchor">Blog</a></li> <li class="svelte-z3ooaf"><a href="/topic" class="navAnchor">Topic</a></li> <li class="svelte-z3ooaf"><a href="/about" class="navAnchor">About</a></li></ul></nav><!----></div><!----> <main class="svelte-1l5lemn"><!----><p>I stole this script from somewhere, I forget where. I found it useful at the time for testing planned schedules for dbms_scheduler jobs.</p> <pre class="language-plsql"><!----><code class="language-plsql"><span class="token keyword">declare</span>
   l_start_date         <span class="token keyword">TIMESTAMP</span><span class="token punctuation">;</span>
   l_next_date          <span class="token keyword">TIMESTAMP</span><span class="token punctuation">;</span>
   l_return_date        <span class="token keyword">TIMESTAMP</span><span class="token punctuation">;</span>
   daily_6am            <span class="token keyword">CONSTANT</span> VARCHAR2<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span> <span class="token operator">:=</span> 'FREQ<span class="token operator">=</span>DAILY<span class="token punctuation">;</span> BYHOUR<span class="token operator">=</span><span class="token number">6</span>'<span class="token punctuation">;</span>
   weekdays_3am         <span class="token keyword">CONSTANT</span> VARCHAR2<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span> <span class="token operator">:=</span> 'FREQ<span class="token operator">=</span>DAILY<span class="token punctuation">;</span> BYDAY<span class="token operator">=</span>MON<span class="token punctuation">,</span>TUE<span class="token punctuation">,</span>WED<span class="token punctuation">,</span>THU<span class="token punctuation">,</span>FRI<span class="token punctuation">;</span> BYHOUR<span class="token operator">=</span><span class="token number">3</span>'<span class="token punctuation">;</span>
   hourly_25past        <span class="token keyword">CONSTANT</span> VARCHAR2<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span> <span class="token operator">:=</span> 'FREQ<span class="token operator">=</span>HOURLY<span class="token punctuation">;</span> BYMINUTE<span class="token operator">=</span><span class="token number">25</span>'<span class="token punctuation">;</span>
   workday_20mins       <span class="token keyword">CONSTANT</span> VARCHAR2<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span> <span class="token operator">:=</span> 'FREQ<span class="token operator">=</span>MINUTELY<span class="token punctuation">;</span> BYHOUR<span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">;</span> <span class="token keyword">INTERVAL</span><span class="token operator">=</span><span class="token number">20</span>'<span class="token punctuation">;</span>
   lastSunofmonth315pm  <span class="token keyword">CONSTANT</span> VARCHAR2<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span> <span class="token operator">:=</span> 'FREQ<span class="token operator">=</span>MONTHLY<span class="token punctuation">;</span> BYDAY<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span>SUN<span class="token punctuation">;</span> BYHOUR<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">;</span> BYMINUTE<span class="token operator">=</span><span class="token number">15</span>'<span class="token punctuation">;</span>
   every5minutes        <span class="token keyword">CONSTANT</span> VARCHAR2<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span> <span class="token operator">:=</span> 'FREQ<span class="token operator">=</span>MINUTELY<span class="token punctuation">;</span> <span class="token keyword">INTERVAL</span><span class="token operator">=</span><span class="token number">5</span>'<span class="token punctuation">;</span>
   every5minsplus2      <span class="token keyword">CONSTANT</span> VARCHAR2<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span> <span class="token operator">:=</span> 'FREQ<span class="token operator">=</span>MINUTELY<span class="token punctuation">;</span> BYMINUTE<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">27</span><span class="token punctuation">,</span><span class="token number">32</span><span class="token punctuation">,</span><span class="token number">37</span><span class="token punctuation">,</span><span class="token number">42</span><span class="token punctuation">,</span><span class="token number">47</span><span class="token punctuation">,</span><span class="token number">52</span><span class="token punctuation">,</span><span class="token number">57</span>'<span class="token punctuation">;</span>

   l_calendar         VARCHAR2<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span> <span class="token operator">:=</span> every5minsplus2<span class="token punctuation">;</span>
<span class="token keyword">begin</span>
   l_start_date <span class="token operator">:=</span> trunc<span class="token punctuation">(</span>SYSTIMESTAMP<span class="token punctuation">)</span><span class="token punctuation">;</span>
   l_return_date <span class="token operator">:=</span> l_start_date<span class="token punctuation">;</span>
   <span class="token keyword">for</span> ctr <span class="token keyword">in</span> <span class="token number">1.</span><span class="token number">.100</span> <span class="token keyword">loop</span>
      dbms_scheduler<span class="token punctuation">.</span>evaluate_calendar_string <span class="token punctuation">(</span>l_calendar
                                              <span class="token punctuation">,</span>l_start_date
                                              <span class="token punctuation">,</span>l_return_date
                                              <span class="token punctuation">,</span>l_next_date<span class="token punctuation">)</span><span class="token punctuation">;</span>
      dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span>'Next Run <span class="token keyword">on</span><span class="token operator">:</span> ' <span class="token operator">||</span>
          to_char<span class="token punctuation">(</span>l_next_date<span class="token punctuation">,</span>'<span class="token keyword">day</span> dd<span class="token operator">/</span>mm<span class="token operator">/</span>yyyy hh24<span class="token operator">:</span>mi<span class="token operator">:</span>ss'<span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      l_return_date <span class="token operator">:=</span> l_next_date<span class="token punctuation">;</span>
   <span class="token keyword">end</span> <span class="token keyword">loop</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span></code><!----></pre><!----><!----></main> <footer class="svelte-1g9mmpv"><p>This is my site, there are many like it but this one is mine.</p> <p>If you don't like it, you know where the close button is.</p> <a href="https://www.linkedin.com/in/mtempleheald" target="_blank" class="svelte-1g9mmpv">Mark Temple-Heald</a> <a href="https://mtempleheald.github.io" target="_blank" class="svelte-1g9mmpv">Home</a> <a href="https://github.com/mtempleheald" target="_blank" class="svelte-1g9mmpv">GitHub</a> <p>Mindful meanderings manifest more manageable machinations. Manoeuvring murky multifaceted
		modernism means meticulously managing many mistakes, misconceptions, misunderstandings. Measured
		multipronged musings, mechanical movements, may maximise meritorious magnificence.</p></footer><!----><!----><!--]--><!----><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_1fqzuke = {
						base: new URL("../../../..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					const data = [null,null,null];

					Promise.all([
						import("../../../../_app/immutable/entry/start.C79-xvMf.js"),
						import("../../../../_app/immutable/entry/app.D8fn-cW0.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 2, 9],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
