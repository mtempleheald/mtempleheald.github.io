<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<meta http-equiv="content-security-policy" content="">
	<link rel="stylesheet" href="/_app/assets/pages/__layout.svelte-711b4112.css">
	<link rel="modulepreload" href="/_app/start-4af727f3.js">
	<link rel="modulepreload" href="/_app/chunks/vendor-7ab0699c.js">
	<link rel="modulepreload" href="/_app/pages/__layout.svelte-b61dbfd0.js">
	<link rel="modulepreload" href="/_app/pages/blog/2009/01/01/Oracle-dbms_scheduler-Testing.md-b63b8525.js">
	</head>
	<body>
		<div>



<div class="svelte-1lrvsco"><header><h1 class="svelte-1lrvsco">Mark Temple-Heald</h1>
  <h2 class="svelte-1lrvsco">the right tool for the job</h2></header>

<nav class="svelte-r02kv1"><ul class="svelte-r02kv1"><li class="svelte-r02kv1"><a href="/" class="navAnchor">Home</a></li>
    <li class="svelte-r02kv1"><a href="/blog" class="navAnchor">Blog</a></li>
    <li class="svelte-r02kv1"><a href="/topic" class="navAnchor">Topic</a></li>
    <li class="svelte-r02kv1"><a href="/about" class="navAnchor">About</a></li></ul>
</nav>
</div>

<main class="svelte-lv7236"><p>I stole this script from somewhere, I forget where. I found it useful at the time for testing planned schedules for dbms_scheduler jobs.  </p>
<pre class="language-plsql"><!-- HTML_TAG_START --><code class="language-plsql"><span class="token keyword">declare</span>
   l_start_date         <span class="token keyword">TIMESTAMP</span><span class="token punctuation">;</span>
   l_next_date          <span class="token keyword">TIMESTAMP</span><span class="token punctuation">;</span>
   l_return_date        <span class="token keyword">TIMESTAMP</span><span class="token punctuation">;</span>
   daily_6am            <span class="token keyword">CONSTANT</span> VARCHAR2<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span> <span class="token operator">:=</span> 'FREQ<span class="token operator">=</span>DAILY<span class="token punctuation">;</span> BYHOUR<span class="token operator">=</span><span class="token number">6</span>'<span class="token punctuation">;</span>
   weekdays_3am         <span class="token keyword">CONSTANT</span> VARCHAR2<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span> <span class="token operator">:=</span> 'FREQ<span class="token operator">=</span>DAILY<span class="token punctuation">;</span> BYDAY<span class="token operator">=</span>MON<span class="token punctuation">,</span>TUE<span class="token punctuation">,</span>WED<span class="token punctuation">,</span>THU<span class="token punctuation">,</span>FRI<span class="token punctuation">;</span> BYHOUR<span class="token operator">=</span><span class="token number">3</span>'<span class="token punctuation">;</span>
   hourly_25past        <span class="token keyword">CONSTANT</span> VARCHAR2<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span> <span class="token operator">:=</span> 'FREQ<span class="token operator">=</span>HOURLY<span class="token punctuation">;</span> BYMINUTE<span class="token operator">=</span><span class="token number">25</span>'<span class="token punctuation">;</span>
   workday_20mins       <span class="token keyword">CONSTANT</span> VARCHAR2<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span> <span class="token operator">:=</span> 'FREQ<span class="token operator">=</span>MINUTELY<span class="token punctuation">;</span> BYHOUR<span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">;</span> <span class="token keyword">INTERVAL</span><span class="token operator">=</span><span class="token number">20</span>'<span class="token punctuation">;</span>
   lastSunofmonth315pm  <span class="token keyword">CONSTANT</span> VARCHAR2<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span> <span class="token operator">:=</span> 'FREQ<span class="token operator">=</span>MONTHLY<span class="token punctuation">;</span> BYDAY<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span>SUN<span class="token punctuation">;</span> BYHOUR<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">;</span> BYMINUTE<span class="token operator">=</span><span class="token number">15</span>'<span class="token punctuation">;</span>
   every5minutes        <span class="token keyword">CONSTANT</span> VARCHAR2<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span> <span class="token operator">:=</span> 'FREQ<span class="token operator">=</span>MINUTELY<span class="token punctuation">;</span> <span class="token keyword">INTERVAL</span><span class="token operator">=</span><span class="token number">5</span>'<span class="token punctuation">;</span>
   every5minsplus2      <span class="token keyword">CONSTANT</span> VARCHAR2<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span> <span class="token operator">:=</span> 'FREQ<span class="token operator">=</span>MINUTELY<span class="token punctuation">;</span> BYMINUTE<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">27</span><span class="token punctuation">,</span><span class="token number">32</span><span class="token punctuation">,</span><span class="token number">37</span><span class="token punctuation">,</span><span class="token number">42</span><span class="token punctuation">,</span><span class="token number">47</span><span class="token punctuation">,</span><span class="token number">52</span><span class="token punctuation">,</span><span class="token number">57</span>'<span class="token punctuation">;</span>
   
   l_calendar         VARCHAR2<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span> <span class="token operator">:=</span> every5minsplus2<span class="token punctuation">;</span>
<span class="token keyword">begin</span>
   l_start_date <span class="token operator">:=</span> trunc<span class="token punctuation">(</span>SYSTIMESTAMP<span class="token punctuation">)</span><span class="token punctuation">;</span>
   l_return_date <span class="token operator">:=</span> l_start_date<span class="token punctuation">;</span>
   <span class="token keyword">for</span> ctr <span class="token keyword">in</span> <span class="token number">1.</span><span class="token number">.100</span> <span class="token keyword">loop</span>
      dbms_scheduler<span class="token punctuation">.</span>evaluate_calendar_string <span class="token punctuation">(</span>l_calendar
                                              <span class="token punctuation">,</span>l_start_date
                                              <span class="token punctuation">,</span>l_return_date
                                              <span class="token punctuation">,</span>l_next_date<span class="token punctuation">)</span><span class="token punctuation">;</span>
      dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span>'Next Run <span class="token keyword">on</span><span class="token operator">:</span> ' <span class="token operator">||</span>
          to_char<span class="token punctuation">(</span>l_next_date<span class="token punctuation">,</span>'<span class="token keyword">day</span> dd<span class="token operator">/</span>mm<span class="token operator">/</span>yyyy hh24<span class="token operator">:</span>mi<span class="token operator">:</span>ss'<span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      l_return_date <span class="token operator">:=</span> l_next_date<span class="token punctuation">;</span>
   <span class="token keyword">end</span> <span class="token keyword">loop</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span></code><!-- HTML_TAG_END --></pre></main>


<footer class="svelte-14g1sgx"><p>This is my site, there are many like it but this one is mine.</p>
  <p>If you don&#39;t like it, you know where the close button is.</p>
  <a href="https://www.linkedin.com/in/mtempleheald" target="_blank" class="svelte-14g1sgx">Mark Temple-Heald</a>
  <a href="https://mtempleheald.github.io" target="_blank" class="svelte-14g1sgx">Home</a>
  <a href="https://github.com/mtempleheald" target="_blank" class="svelte-14g1sgx">GitHub</a>
  <p>Mindful meanderings manifest more manageable machinations.
    Manoeuvring murky multifaceted modernism means meticulously managing many mistakes, misconceptions, misunderstandings.
    Measured multipronged musings, mechanical movements, may maximise meritorious magnificence.
  </p>
</footer>


		<script type="module" data-hydrate="lpq55d">
		import { start } from "/_app/start-4af727f3.js";
		start({
			target: document.querySelector('[data-hydrate="lpq55d"]').parentNode,
			paths: {"base":"","assets":""},
			session: {},
			route: true,
			spa: false,
			trailing_slash: "never",
			hydrate: {
				status: 200,
				error: null,
				nodes: [
					import("/_app/pages/__layout.svelte-b61dbfd0.js"),
						import("/_app/pages/blog/2009/01/01/Oracle-dbms_scheduler-Testing.md-b63b8525.js")
				],
				url: new URL("http://sveltekit-prerender/blog/2009/01/01/Oracle-dbms_scheduler-Testing"),
				params: {}
			}
		});
	</script></div>
	</body>
</html>
