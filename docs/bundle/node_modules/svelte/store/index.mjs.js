import{noop as n,safe_not_equal as t,subscribe as e,run_all as r,is_function as s}from"../internal/index.mjs.js";export{get_store_value as get}from"../internal/index.mjs.js";const o=[];function c(n,t){return{subscribe:i(n,t).subscribe}}function i(e,r=n){let s;const c=[];function i(n){if(t(e,n)&&(e=n,s)){const n=!o.length;for(let n=0;n<c.length;n+=1){const t=c[n];t[1](),o.push(t,e)}if(n){for(let n=0;n<o.length;n+=2)o[n][0](o[n+1]);o.length=0}}}return{set:i,update:function(n){i(n(e))},subscribe:function(t,o=n){const u=[t,o];return c.push(u),1===c.length&&(s=r(i)||n),t(e),()=>{const n=c.indexOf(u);-1!==n&&c.splice(n,1),0===c.length&&(s(),s=null)}}}}function u(t,o,i){const u=!Array.isArray(t),l=u?[t]:t,f=o.length<2;return c(i,(t=>{let c=!1;const i=[];let g=0,h=n;const a=()=>{if(g)return;h();const e=o(u?i[0]:i,t);f?t(e):h=s(e)?e:n},p=l.map(((n,t)=>e(n,(n=>{i[t]=n,g&=~(1<<t),c&&a()}),(()=>{g|=1<<t}))));return c=!0,a(),function(){r(p),h()}}))}export{u as derived,c as readable,i as writable};
//# sourceMappingURL=index.mjs.js.map
