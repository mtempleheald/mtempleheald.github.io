{"version":3,"file":"index.js","sources":["../../../../../../../node_modules/@sveltech/routify/runtime/utils/index.js"],"sourcesContent":["const MATCH_PARAM = RegExp(/\\:([^/()]+)/g)\n\nexport function handleScroll (element) {\n  if (navigator.userAgent.includes('jsdom')) return false\n  scrollAncestorsToTop(element)\n  handleHash()\n}\n\nexport function handleHash () {\n  if (navigator.userAgent.includes('jsdom')) return false\n  const { hash } = window.location\n  if (hash) {\n    const validElementIdRegex = /^[A-Za-z]+[\\w\\-\\:\\.]*$/\n    if (validElementIdRegex.test(hash.substring(1))) {\n      const el = document.querySelector(hash)\n      if (el) el.scrollIntoView()\n    }\n  }\n}\n\nexport function scrollAncestorsToTop (element) {\n  if (\n    element &&\n    element.scrollTo &&\n    element.dataset.routify !== 'scroll-lock' &&\n    element.dataset['routify-scroll'] !== 'lock'\n  ) {\n    element.style['scroll-behavior'] = 'auto'\n    element.scrollTo({ top: 0, behavior: 'auto' })\n    element.style['scroll-behavior'] = ''\n    scrollAncestorsToTop(element.parentElement)\n  }\n}\n\nexport const pathToRegex = (str, recursive) => {\n  const suffix = recursive ? '' : '/?$' //fallbacks should match recursively\n  str = str.replace(/\\/_fallback?$/, '(/|$)')\n  str = str.replace(/\\/index$/, '(/index)?') //index files should be matched even if not present in url\n  str = str.replace(MATCH_PARAM, '([^/]+)') + suffix\n  return str\n}\n\nexport const pathToParamKeys = string => {\n  const paramsKeys = []\n  let matches\n  while ((matches = MATCH_PARAM.exec(string))) paramsKeys.push(matches[1])\n  return paramsKeys\n}\n\nexport const pathToRank = ({ path }) => {\n  return path\n    .split('/')\n    .filter(Boolean)\n    .map(str => (str === '_fallback' ? 'A' : str.startsWith(':') ? 'B' : 'C'))\n    .join('')\n}\n\nlet warningSuppressed = false\n\n/* eslint no-console: 0 */\nexport function suppressWarnings () {\n  if (warningSuppressed) return\n  const consoleWarn = console.warn\n  console.warn = function (msg, ...msgs) {\n    const ignores = [\n      \"was created with unknown prop 'scoped'\",\n      \"was created with unknown prop 'scopedSync'\",\n    ]\n    if (!ignores.find(iMsg => msg.includes(iMsg)))\n      return consoleWarn(msg, ...msgs)\n  }\n  warningSuppressed = true\n}\n\nexport function currentLocation () {\n  const pathMatch = window.location.search.match(/__routify_path=([^&]+)/)\n  const prefetchMatch = window.location.search.match(/__routify_prefetch=\\d+/)\n  window.routify = window.routify || {}\n  window.routify.prefetched = prefetchMatch ? true : false\n  const path = pathMatch && pathMatch[1].replace(/[#?].+/, '') // strip any thing after ? and #\n  return path || window.location.pathname\n}\n"],"names":["MATCH_PARAM","RegExp","handleScroll","element","navigator","userAgent","includes","scrollAncestorsToTop","handleHash","hash","window","location","test","substring","el","document","querySelector","scrollIntoView","scrollTo","dataset","routify","style","top","behavior","parentElement","pathToRegex","str","recursive","suffix","replace","pathToParamKeys","string","paramsKeys","matches","exec","push","pathToRank","path","split","filter","Boolean","map","startsWith","join","warningSuppressed","suppressWarnings","consoleWarn","console","warn","msg","msgs","find","iMsg","currentLocation","pathMatch","search","match","prefetchMatch","prefetched","pathname"],"mappings":"AAAA,MAAMA,EAAcC,OAAO,gBAEpB,SAASC,EAAcC,GAC5B,GAAIC,UAAUC,UAAUC,SAAS,SAAU,OAAO,EAClDC,EAAqBJ,GACrBK,IAGK,SAASA,IACd,GAAIJ,UAAUC,UAAUC,SAAS,SAAU,OAAO,EAClD,MAAMG,KAAEA,GAASC,OAAOC,SACxB,GAAIF,EAAM,CAER,GAD4B,yBACJG,KAAKH,EAAKI,UAAU,IAAK,CAC/C,MAAMC,EAAKC,SAASC,cAAcP,GAC9BK,GAAIA,EAAGG,mBAKV,SAASV,EAAsBJ,GAElCA,GACAA,EAAQe,UACoB,gBAA5Bf,EAAQgB,QAAQC,SACsB,SAAtCjB,EAAQgB,QAAQ,oBAEhBhB,EAAQkB,MAAM,mBAAqB,OACnClB,EAAQe,SAAS,CAAEI,IAAK,EAAGC,SAAU,SACrCpB,EAAQkB,MAAM,mBAAqB,GACnCd,EAAqBJ,EAAQqB,gBAIrB,MAACC,EAAc,CAACC,EAAKC,KAC/B,MAAMC,EAASD,EAAY,GAAK,MAIhC,OADAD,GADAA,GADAA,EAAMA,EAAIG,QAAQ,gBAAiB,UACzBA,QAAQ,WAAY,cACpBA,QAAQ7B,EAAa,WAAa4B,GAIjCE,EAAkBC,IAC7B,MAAMC,EAAa,GACnB,IAAIC,EACJ,KAAQA,EAAUjC,EAAYkC,KAAKH,IAAUC,EAAWG,KAAKF,EAAQ,IACrE,OAAOD,GAGII,EAAa,EAAGC,KAAAA,KACpBA,EACJC,MAAM,KACNC,OAAOC,SACPC,KAAIf,GAAgB,cAARA,EAAsB,IAAMA,EAAIgB,WAAW,KAAO,IAAM,MACpEC,KAAK,IAGV,IAAIC,GAAoB,EAGjB,SAASC,IACd,GAAID,EAAmB,OACvB,MAAME,EAAcC,QAAQC,KAC5BD,QAAQC,KAAO,SAAUC,KAAQC,GAK/B,IAJgB,CACd,yCACA,8CAEWC,MAAKC,GAAQH,EAAI3C,SAAS8C,KACrC,OAAON,EAAYG,KAAQC,IAE/BN,GAAoB,EAGf,SAASS,IACd,MAAMC,EAAY5C,OAAOC,SAAS4C,OAAOC,MAAM,0BACzCC,EAAgB/C,OAAOC,SAAS4C,OAAOC,MAAM,0BACnD9C,OAAOU,QAAUV,OAAOU,SAAW,GACnCV,OAAOU,QAAQsC,aAAaD,EAE5B,OADaH,GAAaA,EAAU,GAAGzB,QAAQ,SAAU,KAC1CnB,OAAOC,SAASgD"}