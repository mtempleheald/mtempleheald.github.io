{"version":3,"file":"assignAPI.js","sources":["../../../../../../../node_modules/@sveltech/routify/runtime/plugins/assignAPI.js"],"sourcesContent":["import { createNodeMiddleware } from '../middleware'\nexport const assignAPI = createNodeMiddleware(({ file }) => {\n    file.api = new ClientApi(file)\n})\n\nclass ClientApi {\n    constructor(file) {\n        this.__file = file\n        Object.defineProperty(this, '__file', { enumerable: false })\n        this.isMeta = !!file.isMeta\n        this.path = file.path\n        this.title = _prettyName(file)\n        this.meta = file.meta\n    }\n\n    get parent() { return !this.__file.root && this.__file.parent.api }\n    get children() {\n        return (this.__file.children || this.__file.isLayout && this.__file.parent.children || [])\n            .filter(c => !c.isNonIndexable)\n            .sort((a, b) => {\n                if(a.isMeta && b.isMeta) return 0\n                a = (a.meta.index || a.meta.title || a.path).toString()\n                b = (b.meta.index || b.meta.title || b.path).toString()\n                return a.localeCompare((b), undefined, { numeric: true, sensitivity: 'base' })\n            })\n            .map(({ api }) => api)\n    }\n    get next() { return _navigate(this, +1) }\n    get prev() { return _navigate(this, -1) }\n    preload() {\n        this.__file.layouts.forEach(file => file.component())\n        this.__file.component() \n    }\n}\n\nfunction _navigate(node, direction) {\n    if (!node.__file.root) {\n        const siblings = node.parent.children\n        const index = siblings.indexOf(node)\n        return node.parent.children[index + direction]\n    }\n}\n\n\nfunction _prettyName(file) {\n    if (typeof file.meta.title !== 'undefined') return file.meta.title\n    else return (file.shortPath || file.path)\n        .split('/')\n        .pop()\n        .replace(/-/g, ' ')\n}\n\n"],"names":["assignAPI","createNodeMiddleware","file","api","ClientApi","[object Object]","this","__file","Object","defineProperty","enumerable","isMeta","path","title","meta","shortPath","split","pop","replace","_prettyName","parent","root","children","isLayout","filter","c","isNonIndexable","sort","a","b","index","toString","localeCompare","undefined","numeric","sensitivity","map","next","_navigate","prev","layouts","forEach","component","node","direction","indexOf"],"mappings":"wDACY,MAACA,EAAYC,GAAqB,EAAGC,KAAAA,MAC7CA,EAAKC,IAAM,IAAIC,EAAUF,MAG7B,MAAME,EACFC,YAAYH,GACRI,KAAKC,OAASL,EACdM,OAAOC,eAAeH,KAAM,SAAU,CAAEI,YAAY,IACpDJ,KAAKK,SAAWT,EAAKS,OACrBL,KAAKM,KAAOV,EAAKU,KACjBN,KAAKO,MAiCb,SAAqBX,GACjB,YAA+B,IAApBA,EAAKY,KAAKD,MAA8BX,EAAKY,KAAKD,OAChDX,EAAKa,WAAab,EAAKU,MAC/BI,MAAM,KACNC,MACAC,QAAQ,KAAM,KAtCFC,CAAYjB,GACzBI,KAAKQ,KAAOZ,EAAKY,KAGrBM,aAAe,OAAQd,KAAKC,OAAOc,MAAQf,KAAKC,OAAOa,OAAOjB,IAC9DmB,eACI,OAAQhB,KAAKC,OAAOe,UAAYhB,KAAKC,OAAOgB,UAAYjB,KAAKC,OAAOa,OAAOE,UAAY,IAClFE,QAAOC,IAAMA,EAAEC,iBACfC,MAAK,CAACC,EAAGC,IACHD,EAAEjB,QAAUkB,EAAElB,OAAe,GAChCiB,GAAKA,EAAEd,KAAKgB,OAASF,EAAEd,KAAKD,OAASe,EAAEhB,MAAMmB,WAC7CF,GAAKA,EAAEf,KAAKgB,OAASD,EAAEf,KAAKD,OAASgB,EAAEjB,MAAMmB,WACtCH,EAAEI,qBAAmBC,EAAW,CAAEC,SAAS,EAAMC,YAAa,YAExEC,KAAI,EAAGjC,IAAAA,KAAUA,IAE1BkC,WAAa,OAAOC,EAAUhC,KAAM,GACpCiC,WAAa,OAAOD,EAAUhC,MAAO,GACrCD,UACIC,KAAKC,OAAOiC,QAAQC,SAAQvC,GAAQA,EAAKwC,cACzCpC,KAAKC,OAAOmC,aAIpB,SAASJ,EAAUK,EAAMC,GACrB,IAAKD,EAAKpC,OAAOc,KAAM,CACnB,MACMS,EADWa,EAAKvB,OAAOE,SACNuB,QAAQF,GAC/B,OAAOA,EAAKvB,OAAOE,SAASQ,EAAQc"}