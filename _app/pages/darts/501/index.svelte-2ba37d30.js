import{S as Ce,i as Fe,s as Ge,e as n,t as E,c as i,a as b,h as k,d as r,b as u,g as M,F as t,j as lt,k as y,m,M as g,G as Ve,N as we,O as He}from"../../../chunks/vendor-4dad5814.js";function Me(s,o,a){const h=s.slice();return h[24]=o[a],h[26]=a,h}function Se(s,o,a){const h=s.slice();return h[24]=o[a],h[26]=a,h}function je(s){let o,a=s[24].score+"",h;return{c(){o=n("div"),h=E(a),this.h()},l(d){o=i(d,"DIV",{class:!0});var D=b(o);h=k(D,a),D.forEach(r),this.h()},h(){u(o,"class","svelte-33bptu")},m(d,D){M(d,o,D),t(o,h)},p(d,D){D&512&&a!==(a=d[24].score+"")&&lt(h,a)},d(d){d&&r(o)}}}function Pe(s){let o,a=s[24].score+"",h;return{c(){o=n("div"),h=E(a),this.h()},l(d){o=i(d,"DIV",{class:!0});var D=b(o);h=k(D,a),D.forEach(r),this.h()},h(){u(o,"class","svelte-33bptu")},m(d,D){M(d,o,D),t(o,h)},p(d,D){D&256&&a!==(a=d[24].score+"")&&lt(h,a)},d(d){d&&r(o)}}}function Re(s){let o,a,h,d,D,A,st,ut,P,nt,U,w,_,V,B,it,ft,C,dt,Et,F,G,bt,kt,H,Tt,l,p,R,z,I,vt,Dt,_t,Bt,f,J,wt,Mt,K,St,jt,L,Pt,qt,Q,At,Ct,W,Ft,Gt,X,Ht,Rt,Y,zt,Jt,Z,Kt,Lt,$,Qt,Wt,x,Xt,Yt,tt,Zt,$t,et,xt,It,S,Ut,Nt,j,rt,te,ee,at,le,se,ot,ue,re,ae,ht=s[9],N=[];for(let e=0;e<ht.length;e+=1)N[e]=je(Se(s,ht,e));let yt=s[8],O=[];for(let e=0;e<yt.length;e+=1)O[e]=Pe(Me(s,yt,e));return{c(){o=n("header"),a=n("div"),h=E(s[0]),D=y(),A=n("div"),st=E("501"),ut=y(),P=n("div"),nt=E(s[1]),w=y(),_=n("div"),V=n("div"),B=n("div"),it=E(s[4]),ft=y(),C=n("p"),dt=E(s[7]),Et=y(),F=n("div");for(let e=0;e<N.length;e+=1)N[e].c();G=y(),bt=n("div"),kt=y(),H=n("div");for(let e=0;e<O.length;e+=1)O[e].c();Tt=y(),l=n("div"),p=n("div"),R=E(s[3]),z=y(),I=n("p"),vt=E(s[6]),Dt=y(),_t=n("div"),Bt=y(),f=n("div"),J=n("button"),wt=E("1"),Mt=y(),K=n("button"),St=E("2"),jt=y(),L=n("button"),Pt=E("3"),qt=y(),Q=n("button"),At=E("4"),Ct=y(),W=n("button"),Ft=E("5"),Gt=y(),X=n("button"),Ht=E("6"),Rt=y(),Y=n("button"),zt=E("7"),Jt=y(),Z=n("button"),Kt=E("8"),Lt=y(),$=n("button"),Qt=E("9"),Wt=y(),x=n("button"),Xt=E("Undo"),Yt=y(),tt=n("button"),Zt=E("0"),$t=y(),et=n("button"),xt=E("<"),It=y(),S=n("button"),Ut=E(s[5]),Nt=y(),j=n("div"),rt=n("button"),te=E("60"),ee=y(),at=n("button"),le=E("100"),se=y(),ot=n("button"),ue=E("180"),this.h()},l(e){o=i(e,"HEADER",{class:!0});var v=b(o);a=i(v,"DIV",{class:!0});var c=b(a);h=k(c,s[0]),c.forEach(r),D=m(v),A=i(v,"DIV",{class:!0});var ct=b(A);st=k(ct,"501"),ct.forEach(r),ut=m(v),P=i(v,"DIV",{class:!0});var oe=b(P);nt=k(oe,s[1]),oe.forEach(r),v.forEach(r),w=m(e),_=i(e,"DIV",{class:!0});var q=b(_);V=i(q,"DIV",{class:!0});var Ot=b(V);B=i(Ot,"DIV",{class:!0});var ce=b(B);it=k(ce,s[4]),ce.forEach(r),ft=m(Ot),C=i(Ot,"P",{class:!0});var ne=b(C);dt=k(ne,s[7]),ne.forEach(r),Ot.forEach(r),Et=m(q),F=i(q,"DIV",{class:!0});var ie=b(F);for(let pt=0;pt<N.length;pt+=1)N[pt].l(ie);ie.forEach(r),G=m(q),bt=i(q,"DIV",{class:!0}),b(bt).forEach(r),kt=m(q),H=i(q,"DIV",{class:!0});var be=b(H);for(let pt=0;pt<O.length;pt+=1)O[pt].l(be);be.forEach(r),Tt=m(q),l=i(q,"DIV",{class:!0});var gt=b(l);p=i(gt,"DIV",{class:!0});var ve=b(p);R=k(ve,s[3]),ve.forEach(r),z=m(gt),I=i(gt,"P",{class:!0});var pe=b(I);vt=k(pe,s[6]),pe.forEach(r),gt.forEach(r),q.forEach(r),Dt=m(e),_t=i(e,"DIV",{class:!0});var Ae=b(_t);Ae.forEach(r),Bt=m(e),f=i(e,"DIV",{class:!0});var T=b(f);J=i(T,"BUTTON",{type:!0,class:!0});var fe=b(J);wt=k(fe,"1"),fe.forEach(r),Mt=m(T),K=i(T,"BUTTON",{type:!0,class:!0});var de=b(K);St=k(de,"2"),de.forEach(r),jt=m(T),L=i(T,"BUTTON",{type:!0,class:!0});var _e=b(L);Pt=k(_e,"3"),_e.forEach(r),qt=m(T),Q=i(T,"BUTTON",{type:!0,class:!0});var he=b(Q);At=k(he,"4"),he.forEach(r),Ct=m(T),W=i(T,"BUTTON",{type:!0,class:!0});var ye=b(W);Ft=k(ye,"5"),ye.forEach(r),Gt=m(T),X=i(T,"BUTTON",{type:!0,class:!0});var me=b(X);Ht=k(me,"6"),me.forEach(r),Rt=m(T),Y=i(T,"BUTTON",{type:!0,class:!0});var Ee=b(Y);zt=k(Ee,"7"),Ee.forEach(r),Jt=m(T),Z=i(T,"BUTTON",{type:!0,class:!0});var ke=b(Z);Kt=k(ke,"8"),ke.forEach(r),Lt=m(T),$=i(T,"BUTTON",{type:!0,class:!0});var Te=b($);Qt=k(Te,"9"),Te.forEach(r),Wt=m(T),x=i(T,"BUTTON",{type:!0,class:!0});var De=b(x);Xt=k(De,"Undo"),De.forEach(r),Yt=m(T),tt=i(T,"BUTTON",{type:!0,class:!0});var Be=b(tt);Zt=k(Be,"0"),Be.forEach(r),$t=m(T),et=i(T,"BUTTON",{type:!0,class:!0});var Ie=b(et);xt=k(Ie,"<"),Ie.forEach(r),T.forEach(r),It=m(e),S=i(e,"BUTTON",{id:!0,type:!0,class:!0});var Ue=b(S);Ut=k(Ue,s[5]),Ue.forEach(r),Nt=m(e),j=i(e,"DIV",{class:!0});var mt=b(j);rt=i(mt,"BUTTON",{type:!0,class:!0});var Ne=b(rt);te=k(Ne,"60"),Ne.forEach(r),ee=m(mt),at=i(mt,"BUTTON",{type:!0,class:!0});var Oe=b(at);le=k(Oe,"100"),Oe.forEach(r),se=m(mt),ot=i(mt,"BUTTON",{type:!0,class:!0});var ge=b(ot);ue=k(ge,"180"),ge.forEach(r),mt.forEach(r),this.h()},h(){u(a,"class",d="player "+(s[2]==s[0]?"active":"")+" svelte-33bptu"),u(A,"class","title svelte-33bptu"),u(P,"class",U="player "+(s[2]==s[1]?"active":"")+" svelte-33bptu"),u(o,"class","svelte-33bptu"),u(B,"class","svelte-33bptu"),u(C,"class","svelte-33bptu"),u(V,"class","current svelte-33bptu"),u(F,"class","history svelte-33bptu"),u(bt,"class","filler svelte-33bptu"),u(H,"class","history svelte-33bptu"),u(p,"class","svelte-33bptu"),u(I,"class","svelte-33bptu"),u(l,"class","current svelte-33bptu"),u(_,"class","game svelte-33bptu"),u(_t,"class","shortcuts"),u(J,"type","button"),J.value="1",u(J,"class","svelte-33bptu"),u(K,"type","button"),K.value="2",u(K,"class","svelte-33bptu"),u(L,"type","button"),L.value="3",u(L,"class","svelte-33bptu"),u(Q,"type","button"),Q.value="4",u(Q,"class","svelte-33bptu"),u(W,"type","button"),W.value="5",u(W,"class","svelte-33bptu"),u(X,"type","button"),X.value="6",u(X,"class","svelte-33bptu"),u(Y,"type","button"),Y.value="7",u(Y,"class","svelte-33bptu"),u(Z,"type","button"),Z.value="8",u(Z,"class","svelte-33bptu"),u($,"type","button"),$.value="9",u($,"class","svelte-33bptu"),u(x,"type","button"),x.value="undo",u(x,"class","svelte-33bptu"),u(tt,"type","button"),tt.value="0",u(tt,"class","svelte-33bptu"),u(et,"type","button"),et.value="submit",u(et,"class","svelte-33bptu"),u(f,"class","keypad svelte-33bptu"),u(S,"id","submit"),u(S,"type","button"),S.value="submit",u(S,"class","svelte-33bptu"),u(rt,"type","button"),u(rt,"class","svelte-33bptu"),u(at,"type","button"),u(at,"class","svelte-33bptu"),u(ot,"type","button"),u(ot,"class","svelte-33bptu"),u(j,"class","keypad svelte-33bptu")},m(e,v){M(e,o,v),t(o,a),t(a,h),t(o,D),t(o,A),t(A,st),t(o,ut),t(o,P),t(P,nt),M(e,w,v),M(e,_,v),t(_,V),t(V,B),t(B,it),t(V,ft),t(V,C),t(C,dt),t(_,Et),t(_,F);for(let c=0;c<N.length;c+=1)N[c].m(F,null);t(_,G),t(_,bt),t(_,kt),t(_,H);for(let c=0;c<O.length;c+=1)O[c].m(H,null);t(_,Tt),t(_,l),t(l,p),t(p,R),t(l,z),t(l,I),t(I,vt),M(e,Dt,v),M(e,_t,v),M(e,Bt,v),M(e,f,v),t(f,J),t(J,wt),t(f,Mt),t(f,K),t(K,St),t(f,jt),t(f,L),t(L,Pt),t(f,qt),t(f,Q),t(Q,At),t(f,Ct),t(f,W),t(W,Ft),t(f,Gt),t(f,X),t(X,Ht),t(f,Rt),t(f,Y),t(Y,zt),t(f,Jt),t(f,Z),t(Z,Kt),t(f,Lt),t(f,$),t($,Qt),t(f,Wt),t(f,x),t(x,Xt),t(f,Yt),t(f,tt),t(tt,Zt),t(f,$t),t(f,et),t(et,xt),M(e,It,v),M(e,S,v),t(S,Ut),M(e,Nt,v),M(e,j,v),t(j,rt),t(rt,te),t(j,ee),t(j,at),t(at,le),t(j,se),t(j,ot),t(ot,ue),re||(ae=[g(J,"click",s[10]),g(K,"click",s[10]),g(L,"click",s[10]),g(Q,"click",s[10]),g(W,"click",s[10]),g(X,"click",s[10]),g(Y,"click",s[10]),g(Z,"click",s[10]),g($,"click",s[10]),g(x,"click",s[12]),g(tt,"click",s[10]),g(et,"click",s[11]),g(S,"click",s[16]),g(rt,"click",s[17]),g(at,"click",s[18]),g(ot,"click",s[19])],re=!0)},p(e,[v]){if(v&1&&lt(h,e[0]),v&5&&d!==(d="player "+(e[2]==e[0]?"active":"")+" svelte-33bptu")&&u(a,"class",d),v&2&&lt(nt,e[1]),v&6&&U!==(U="player "+(e[2]==e[1]?"active":"")+" svelte-33bptu")&&u(P,"class",U),v&16&&lt(it,e[4]),v&128&&lt(dt,e[7]),v&512){ht=e[9];let c;for(c=0;c<ht.length;c+=1){const ct=Se(e,ht,c);N[c]?N[c].p(ct,v):(N[c]=je(ct),N[c].c(),N[c].m(F,null))}for(;c<N.length;c+=1)N[c].d(1);N.length=ht.length}if(v&256){yt=e[8];let c;for(c=0;c<yt.length;c+=1){const ct=Me(e,yt,c);O[c]?O[c].p(ct,v):(O[c]=Pe(ct),O[c].c(),O[c].m(H,null))}for(;c<O.length;c+=1)O[c].d(1);O.length=yt.length}v&8&&lt(R,e[3]),v&64&&lt(vt,e[6]),v&32&&lt(Ut,e[5])},i:Ve,o:Ve,d(e){e&&r(o),e&&r(w),e&&r(_),we(N,e),we(O,e),e&&r(Dt),e&&r(_t),e&&r(Bt),e&&r(f),e&&r(It),e&&r(S),e&&r(Nt),e&&r(j),re=!1,He(ae)}}}let Vt=2,qe=501;function ze(s){switch(s){case 3:return"T";case 2:return"D";default:return""}}function Je(s,o,a){let h,d,D,A,st,ut,P,nt,{player1:U="Steve"}=o,{player2:w="Mark"}=o,_=0,V=0,B=[];const it=[32,40,16,8,24,20,36,12,4,28,10,30,50,38,34,2,22,26,18,14,6],ft=[1,3,2].map(l=>[20,19,18,16,12,14,8,10,17,15,25,13,11,1,2,4,5,6,9,7,3].map(p=>l==3&&p==25?[0,0]:[p,l])).reduce((l,p)=>l.some(R=>R[0]*R[1]==p[0]*p[1])?l:l.concat(p),[]);console.debug("possible_throws",ft);function C(l){if(l>170||[169,168,166,165,163,162,159].some(I=>I==l))return"no checkout possible";if(l==50)return"Bull";if(it.some(I=>I==l))return`D${l/2}`;const p=l>=110||[107,104,101].some(I=>I==l),R=p?l-60:l;let z=it.map(I=>ft.map(vt=>({double:I,number:vt[0],hits:vt[1]}))).flat().filter(I=>I.double+I.number*I.hits==R);return z.length>0?`${p?"T20 ":""} ${ze(z[0].hits)}${z[0].number} ${z[0].double==50?"Bull":"D"+z[0].double/2}`:"checkout possible"}function dt(l){console.debug("press",l.target.value),l.target.disabled=!0,a(5,_=parseInt(`${_}${l.target.value}`)),_>180&&a(5,_=0),setTimeout(()=>{l.target.disabled=!1},250)}function Et(){console.debug("backspace"),_!=0&&a(5,_=parseInt(_.toString().substring(1,-1)))}function F(){console.debug("undo"),_==0&&(V=V-1,a(5,_=0))}function G(l){console.debug("submit",l),(d==U&&st>=l||d==w&&ut>=l)&&(a(14,B=[...B,{turn:V,player:d,score:l}]),V=V+1,a(5,_=0))}const bt=()=>G(_),kt=()=>G(60),H=()=>G(100),Tt=()=>G(180);return s.$$set=l=>{"player1"in l&&a(0,U=l.player1),"player2"in l&&a(1,w=l.player2)},s.$$.update=()=>{s.$$.dirty&16385&&a(15,h=B.length==0?U:B.filter(l=>l.turn==0)[0].player),s.$$.dirty&16387&&a(2,d=B.length==0?U:B.reduce((l,p)=>p.turn>l.turn?p:l).player==U?w:U),s.$$.dirty&49159&&a(9,D=B.filter(l=>l.player==U).sort((l,p)=>p.turn-l.turn).slice(0,d==U&&h==w?Vt:Vt+1).sort((l,p)=>l.turn-p.turn)),s.$$.dirty&49159&&a(8,A=B.filter(l=>l.player==w).sort((l,p)=>p.turn-l.turn).slice(0,d==w&&h==U?Vt:Vt+1).sort((l,p)=>l.turn-p.turn)),s.$$.dirty&16385&&a(4,st=Math.max(0,B.filter(l=>l.player==U).reduce((l,p)=>l-p.score,qe))),s.$$.dirty&16386&&a(3,ut=Math.max(0,B.filter(l=>l.player==w).reduce((l,p)=>l-p.score,qe))),s.$$.dirty&16&&a(7,P=C(st)),s.$$.dirty&8&&a(6,nt=C(ut))},[U,w,d,ut,st,_,nt,P,A,D,dt,Et,F,G,B,h,bt,kt,H,Tt]}class Le extends Ce{constructor(o){super();Fe(this,o,Je,Re,Ge,{player1:0,player2:1})}}export{Le as default};
