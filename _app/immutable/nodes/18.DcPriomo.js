import{s as Ut,n as Fe}from"../chunks/scheduler.Cp24rM3s.js";import{S as zt,i as Rt,e as n,s as o,H as d,c as s,k as r,a,o as p,r as c,d as t,b as f,g as i}from"../chunks/index.CkxK-9SL.js";function qt(Pt){let u,Ne="Finally switched to Linux desktop",Q,h,Ge=`I’d been meaning to switch to Linux for some time now, around the time I built this PC.
I tried Debian last time and had major issuing even installing it, related to a poor quality power supply which has been replaced since.<br/>
The Windows installer seemed a little more forgiving and I just never got around to retrying, until now.`,Y,m,Ve="The plan",Z,v,$e=`I figured I’d make life relatively easy for myself and go with a popular, easy distro, so Ubuntu for now.
Mostly it has been easy, my aim to get to a position where I can easily use the following software:`,ee,w,Je='<li>Firefox - trivial, ootb</li> <li>Thunderbird - trivial, ootb</li> <li>KeePass - simple once I found <a href="https://www.ithowtoo.com/2020/12/18/ubuntu-20-04-installing-keypass/" rel="nofollow">instructions</a></li> <li>DropBox - simple to follow <a href="https://www.dropbox.com/install-linux" rel="nofollow">instructions</a></li> <li>git - trivial, <code>sudo apt-get install git</code> or <code>sudo apt-get install git-all</code></li> <li>VS Code - simple <a href="https://code.visualstudio.com/docs/setup/linux#_debian-and-ubuntu-based-distributions" rel="nofollow">instructions</a></li> <li>Rust - Trivial <code>curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://sh.rustup.rs | sh</code></li>',te,b,Ke="To do:",le,C,Qe='<li>.NET Core - <a href="https://docs.microsoft.com/en-gb/dotnet/core/install/linux-ubuntu" rel="nofollow">https://docs.microsoft.com/en-gb/dotnet/core/install/linux-ubuntu</a></li> <li>Steam</li> <li>adb</li> <li>alternative browsers</li> <li>node/npm/svelte</li> <li>docker/k8s/terraform</li>',ie,x,Ye="The Broadcom issue",ne,_,Ze=`Other than getting familiar with the CLI again (I’ve been lazy since work moved to Windows servers) this hasn’t been too painful.<br/>
With one exception…
Broadcom bluetooth, which is combined with wifi on the same device.`,se,g,et=`Repeatable steps:
<code>sudo bluetoothctl</code>
Agent registered
<code>devices</code>
Device XXX MX Master
<code>trust XXX [CHG] Device XXX Trusted: yes Changing XXX trust succeeded </code>connect XXX\`
Attempting to connect to XXX
[CHG] Device XXX Connected: yes
Failed to connect: org.bluez.Error.Failed
[CHG] Device XXX Connected: no
pair XXX
Attempting to pair with XXX
Failed to pair: org.bluez.Error.AuthenticationCanceled
bluetoothd
D-Bus setup failed: Connection “:1.307” is not allowed to own the service “org.bluez” due to security policies in the configuration file`,oe,M,tt=`I checked over <code>/etc/bluetooth/main.conf</code> but that didn’t help.
I explored <code>/etc/dbus-1/system.d/bluetooth.conf</code> and group policies associated, no progress.`,ae,y,lt=`Until finally I found the real error in Logs:
<code>Bluetooth: hci0: BCM: Patch brcm/BCM20702A1-13d3-3404.hcd not found</code>
Proof that this is a software/firmware/driver thing not just me missing something obvious.`,re,H,it=`This took a lot of digging until I finally found <a href="https://askubuntu.com/questions/632336/bluetooth-broadcom-43142-isnt-working/#answer-632348" rel="nofollow">this</a>.
A well written post that explains how to do this in detail and why this is necessary.
Honourable mention to <a href="https://github.com/winterheart/broadcom-bt-firmware" rel="nofollow">GitHub hosted broadcom firmware</a> though I didn’t use this in the end.`,ue,k,nt="Check recent device messages for bluetooth errors using <code>dmesg | egrep -i &#39;blue|firm&#39;</code>:",de,T,pe,Lt=`<code class="language-undefined">[    2.516055] Bluetooth: hci0: BCM20702A
[    2.517048] Bluetooth: hci0: BCM20702A1 (001.002.014) build 0000
[    2.518036] bluetooth hci0: Direct firmware load for brcm/BCM20702A1-13d3-3404.hcd failed with error -2
[    2.518039] Bluetooth: hci0: BCM: Patch brcm/BCM20702A1-13d3-3404.hcd not found</code>`,ce,P,st="Check Network PCI configuration with <code>lspci -nnk | grep -iA2 net</code>:",fe,L,he,It='<code class="language-02:00.0">	Subsystem: AzureWave BCM4352 802.11ac Wireless Network Adapter [1a3b:2123]</code>',me,I,ot="and USB device configuration with <code>lsusb</code>:",ve,B,we,Bt='<code class="language-undefined">Bus 003 Device 004: ID 13d3:3404 IMC Networks BCM20702A0</code>',be,X,at=`Download <a href="http://drivers.softpedia.com/get/BLUETOOTH/Broadcom/ASUS-X99-DELUXE-Broadcom-Bluetooth-Driver-6515800-12009860.shtml#download" rel="nofollow">Windows driver</a>
Extract and find file bcbtums-*.inf, I went for Windows 8.1 64bit version.
In file find <code>VID_13d3&amp;PID_3404</code> (values from lsusb command)`,Ce,A,xe,Xt=`<code class="language-undefined">line 148: %AzBtModule.DeviceDesc%=BlueRAMUSB3404,         USBVID_13D3&amp;PID_3404       ; 4352HMB Azurewave Module
line 234: %AzBtModule.DeviceDesc%=RAMUSB3404,         USBVID_13D3&amp;PID_3404       ; 4352HMB Azurewave Module</code>`,_e,D,rt="In the same file search for this DeviceDesc to find the filename of the driver:",ge,E,Me,At=`<code class="language-undefined">[RAMUSB3404.CopyList]
bcbtums.sys
btwampfl.sys
BCM20702A1_001.002.014.1443.1479.hex</code>`,ye,S,ut="Copy .hex file to $HOME and convert to hcd:",He,U,ke,Dt=`<code class="language-undefined">git clone git://github.com/jessesung/hex2hcd.git
cd hex2hcd/
make
cd $HOME
~/hex2hcd/hex2hcd ~/BCM20702A1_001.002.014.1443.1479.hex ~/BCM20702A1-13d3-3404.hcd</code>`,Te,z,dt="Copy file to firmware directory:",Pe,R,Le,Et='<code class="language-undefined">sudo cp ~/BCM20702A1-13d3-3404.hcd /lib/firmware/brcm</code>',Ie,q,pt=`Turn it off and on again.
Huzzah! (Just lucky I kept my old mouse or I’d probably have abandoned the whole endeavour)`,Be,j,ct="To be continued…",Xe,Ae,De,W,ft="1 week later…",Ee,O,ht=`So, after a minor upgrade and a restart I’ve lost wifi, but bluetooth is still working.
Luckily I still have a 25m ethernet cable and an old wired mouse lying around.
<a href="https://itsfoss.com/fix-no-wireless-network-ubuntu/" rel="nofollow">This</a> seems to describe the same problem but the fix didn’t help me.`,Se,F,mt=`Under Software & Updates > Additional Drivers I see that my Wireless Network Adapter is not being used.
I try to enable it and see the error`,Ue,N,ze,St='<code class="language-undefined">pk-client-error-quark: Error while installing package: installed bcmwl-kernel-source package post-installation script subprocess returned error exit status 10 (313)</code>',Re,G,vt=`Apparently <a href="https://askubuntu.com/questions/1305699/bcmwl-kernel-source-broken-on-kernel-5-8-0-34-generic#answer-1305819" rel="nofollow">Canonical forget to upgrade bcmwl-kernel-source</a> <code>sudo apt purge -y bcmwl-kernel-source</code> to remove the package that isn’t working
<code>sudo apt autoremove</code> to tidy up
Option 1 <a href="http://mirrors.kernel.org/ubuntu/pool/restricted/b/bcmwl/bcmwl-kernel-source_6.30.223.271+bdcom-0ubuntu7_amd64.deb" rel="nofollow">install pkg</a> seems to have brought back wifi, and bluetooth’s still working we’ll see how long this lasts…`,qe,V,wt="The most irritating thing here is that this is a desktop, I have a long ethernet cable and I’d be happy with a wired mouse, it just happens to be wireless, so none of this is really necessary.",je,$,bt="I’m getting the impression I need to actually understand the fix not just blindly apply internet answers!",We,J,Ct=`Let’s start with the kernel version since that seems to be where this problem starts.
<code>cat /proc/version_signature</code>
Ubuntu 5.8.0-36.40~20.04.1-generic 5.8.18`,Oe,K,xt=`How am I meant to know that bcmwl-kernel-source 6.30… compiles with kernel 5.8?<br/>
Parking this for another day, will see if the fix persists…`;return{c(){u=n("h1"),u.textContent=Ne,Q=o(),h=n("p"),h.innerHTML=Ge,Y=o(),m=n("h2"),m.textContent=Ve,Z=o(),v=n("p"),v.textContent=$e,ee=o(),w=n("ul"),w.innerHTML=Je,te=o(),b=n("p"),b.textContent=Ke,le=o(),C=n("ul"),C.innerHTML=Qe,ie=o(),x=n("h2"),x.textContent=Ye,ne=o(),_=n("p"),_.innerHTML=Ze,se=o(),g=n("p"),g.innerHTML=et,oe=o(),M=n("p"),M.innerHTML=tt,ae=o(),y=n("p"),y.innerHTML=lt,re=o(),H=n("p"),H.innerHTML=it,ue=o(),k=n("p"),k.innerHTML=nt,de=o(),T=n("pre"),pe=new d(!1),ce=o(),P=n("p"),P.innerHTML=st,fe=o(),L=n("pre"),he=new d(!1),me=o(),I=n("p"),I.innerHTML=ot,ve=o(),B=n("pre"),we=new d(!1),be=o(),X=n("p"),X.innerHTML=at,Ce=o(),A=n("pre"),xe=new d(!1),_e=o(),D=n("p"),D.textContent=rt,ge=o(),E=n("pre"),Me=new d(!1),ye=o(),S=n("p"),S.textContent=ut,He=o(),U=n("pre"),ke=new d(!1),Te=o(),z=n("p"),z.textContent=dt,Pe=o(),R=n("pre"),Le=new d(!1),Ie=o(),q=n("p"),q.textContent=pt,Be=o(),j=n("p"),j.textContent=ct,Xe=o(),Ae=n("hr"),De=o(),W=n("p"),W.textContent=ft,Ee=o(),O=n("p"),O.innerHTML=ht,Se=o(),F=n("p"),F.textContent=mt,Ue=o(),N=n("pre"),ze=new d(!1),Re=o(),G=n("p"),G.innerHTML=vt,qe=o(),V=n("p"),V.textContent=wt,je=o(),$=n("p"),$.textContent=bt,We=o(),J=n("p"),J.innerHTML=Ct,Oe=o(),K=n("p"),K.innerHTML=xt,this.h()},l(e){u=s(e,"H1",{"data-svelte-h":!0}),r(u)!=="svelte-1yb7d2j"&&(u.textContent=Ne),Q=a(e),h=s(e,"P",{"data-svelte-h":!0}),r(h)!=="svelte-ifv7pv"&&(h.innerHTML=Ge),Y=a(e),m=s(e,"H2",{"data-svelte-h":!0}),r(m)!=="svelte-gwmcr8"&&(m.textContent=Ve),Z=a(e),v=s(e,"P",{"data-svelte-h":!0}),r(v)!=="svelte-1kmfpgq"&&(v.textContent=$e),ee=a(e),w=s(e,"UL",{"data-svelte-h":!0}),r(w)!=="svelte-6ccgu2"&&(w.innerHTML=Je),te=a(e),b=s(e,"P",{"data-svelte-h":!0}),r(b)!=="svelte-n4j33s"&&(b.textContent=Ke),le=a(e),C=s(e,"UL",{"data-svelte-h":!0}),r(C)!=="svelte-ovsxq1"&&(C.innerHTML=Qe),ie=a(e),x=s(e,"H2",{"data-svelte-h":!0}),r(x)!=="svelte-15vmay5"&&(x.textContent=Ye),ne=a(e),_=s(e,"P",{"data-svelte-h":!0}),r(_)!=="svelte-4fgwrs"&&(_.innerHTML=Ze),se=a(e),g=s(e,"P",{"data-svelte-h":!0}),r(g)!=="svelte-3eg3x6"&&(g.innerHTML=et),oe=a(e),M=s(e,"P",{"data-svelte-h":!0}),r(M)!=="svelte-18j1zm0"&&(M.innerHTML=tt),ae=a(e),y=s(e,"P",{"data-svelte-h":!0}),r(y)!=="svelte-s2ctry"&&(y.innerHTML=lt),re=a(e),H=s(e,"P",{"data-svelte-h":!0}),r(H)!=="svelte-mvm36q"&&(H.innerHTML=it),ue=a(e),k=s(e,"P",{"data-svelte-h":!0}),r(k)!=="svelte-14s509x"&&(k.innerHTML=nt),de=a(e),T=s(e,"PRE",{class:!0});var l=p(T);pe=c(l,!1),l.forEach(t),ce=a(e),P=s(e,"P",{"data-svelte-h":!0}),r(P)!=="svelte-zba1bi"&&(P.innerHTML=st),fe=a(e),L=s(e,"PRE",{class:!0});var _t=p(L);he=c(_t,!1),_t.forEach(t),me=a(e),I=s(e,"P",{"data-svelte-h":!0}),r(I)!=="svelte-16wawsh"&&(I.innerHTML=ot),ve=a(e),B=s(e,"PRE",{class:!0});var gt=p(B);we=c(gt,!1),gt.forEach(t),be=a(e),X=s(e,"P",{"data-svelte-h":!0}),r(X)!=="svelte-75s88p"&&(X.innerHTML=at),Ce=a(e),A=s(e,"PRE",{class:!0});var Mt=p(A);xe=c(Mt,!1),Mt.forEach(t),_e=a(e),D=s(e,"P",{"data-svelte-h":!0}),r(D)!=="svelte-768li"&&(D.textContent=rt),ge=a(e),E=s(e,"PRE",{class:!0});var yt=p(E);Me=c(yt,!1),yt.forEach(t),ye=a(e),S=s(e,"P",{"data-svelte-h":!0}),r(S)!=="svelte-61q3bm"&&(S.textContent=ut),He=a(e),U=s(e,"PRE",{class:!0});var Ht=p(U);ke=c(Ht,!1),Ht.forEach(t),Te=a(e),z=s(e,"P",{"data-svelte-h":!0}),r(z)!=="svelte-1jcp6uq"&&(z.textContent=dt),Pe=a(e),R=s(e,"PRE",{class:!0});var kt=p(R);Le=c(kt,!1),kt.forEach(t),Ie=a(e),q=s(e,"P",{"data-svelte-h":!0}),r(q)!=="svelte-9vfogp"&&(q.textContent=pt),Be=a(e),j=s(e,"P",{"data-svelte-h":!0}),r(j)!=="svelte-rvf6pv"&&(j.textContent=ct),Xe=a(e),Ae=s(e,"HR",{}),De=a(e),W=s(e,"P",{"data-svelte-h":!0}),r(W)!=="svelte-17bc38z"&&(W.textContent=ft),Ee=a(e),O=s(e,"P",{"data-svelte-h":!0}),r(O)!=="svelte-1thqcrr"&&(O.innerHTML=ht),Se=a(e),F=s(e,"P",{"data-svelte-h":!0}),r(F)!=="svelte-8tts1e"&&(F.textContent=mt),Ue=a(e),N=s(e,"PRE",{class:!0});var Tt=p(N);ze=c(Tt,!1),Tt.forEach(t),Re=a(e),G=s(e,"P",{"data-svelte-h":!0}),r(G)!=="svelte-f2le2o"&&(G.innerHTML=vt),qe=a(e),V=s(e,"P",{"data-svelte-h":!0}),r(V)!=="svelte-3p4z5n"&&(V.textContent=wt),je=a(e),$=s(e,"P",{"data-svelte-h":!0}),r($)!=="svelte-l66quo"&&($.textContent=bt),We=a(e),J=s(e,"P",{"data-svelte-h":!0}),r(J)!=="svelte-18tpdr9"&&(J.innerHTML=Ct),Oe=a(e),K=s(e,"P",{"data-svelte-h":!0}),r(K)!=="svelte-ucimpd"&&(K.innerHTML=xt),this.h()},h(){pe.a=null,f(T,"class","language-undefined"),he.a=null,f(L,"class","language-02:00.0"),we.a=null,f(B,"class","language-undefined"),xe.a=null,f(A,"class","language-undefined"),Me.a=null,f(E,"class","language-undefined"),ke.a=null,f(U,"class","language-undefined"),Le.a=null,f(R,"class","language-undefined"),ze.a=null,f(N,"class","language-undefined")},m(e,l){i(e,u,l),i(e,Q,l),i(e,h,l),i(e,Y,l),i(e,m,l),i(e,Z,l),i(e,v,l),i(e,ee,l),i(e,w,l),i(e,te,l),i(e,b,l),i(e,le,l),i(e,C,l),i(e,ie,l),i(e,x,l),i(e,ne,l),i(e,_,l),i(e,se,l),i(e,g,l),i(e,oe,l),i(e,M,l),i(e,ae,l),i(e,y,l),i(e,re,l),i(e,H,l),i(e,ue,l),i(e,k,l),i(e,de,l),i(e,T,l),pe.m(Lt,T),i(e,ce,l),i(e,P,l),i(e,fe,l),i(e,L,l),he.m(It,L),i(e,me,l),i(e,I,l),i(e,ve,l),i(e,B,l),we.m(Bt,B),i(e,be,l),i(e,X,l),i(e,Ce,l),i(e,A,l),xe.m(Xt,A),i(e,_e,l),i(e,D,l),i(e,ge,l),i(e,E,l),Me.m(At,E),i(e,ye,l),i(e,S,l),i(e,He,l),i(e,U,l),ke.m(Dt,U),i(e,Te,l),i(e,z,l),i(e,Pe,l),i(e,R,l),Le.m(Et,R),i(e,Ie,l),i(e,q,l),i(e,Be,l),i(e,j,l),i(e,Xe,l),i(e,Ae,l),i(e,De,l),i(e,W,l),i(e,Ee,l),i(e,O,l),i(e,Se,l),i(e,F,l),i(e,Ue,l),i(e,N,l),ze.m(St,N),i(e,Re,l),i(e,G,l),i(e,qe,l),i(e,V,l),i(e,je,l),i(e,$,l),i(e,We,l),i(e,J,l),i(e,Oe,l),i(e,K,l)},p:Fe,i:Fe,o:Fe,d(e){e&&(t(u),t(Q),t(h),t(Y),t(m),t(Z),t(v),t(ee),t(w),t(te),t(b),t(le),t(C),t(ie),t(x),t(ne),t(_),t(se),t(g),t(oe),t(M),t(ae),t(y),t(re),t(H),t(ue),t(k),t(de),t(T),t(ce),t(P),t(fe),t(L),t(me),t(I),t(ve),t(B),t(be),t(X),t(Ce),t(A),t(_e),t(D),t(ge),t(E),t(ye),t(S),t(He),t(U),t(Te),t(z),t(Pe),t(R),t(Ie),t(q),t(Be),t(j),t(Xe),t(Ae),t(De),t(W),t(Ee),t(O),t(Se),t(F),t(Ue),t(N),t(Re),t(G),t(qe),t(V),t(je),t($),t(We),t(J),t(Oe),t(K))}}}class Ot extends zt{constructor(u){super(),Rt(this,u,null,qt,Ut,{})}}export{Ot as component};
